<script src="{{ "/assets/js/jquery-3.1.1.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/flickity.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/parallax.js" | relative_url }}"></script>
<script src="{{ "/assets/js/isotope.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/granim.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/countdown.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/smooth-scroll.min.js" | relative_url }}"></script>
<script src="{{ "/assets/js/scripts.js" | relative_url }}"></script>

<script>
  $(document).ready(function($) {
    $('a[href^="/#"], a[href^="#"]').bind('click.smoothscroll',function (e) {
      var target = this.hash,
          $target = $(target);

      $('html, body').stop().animate( {
        'scrollTop': $target.offset().top
      }, 1000, 'swing', function () {
        window.location.hash = target;
      });
    });
    
    // Contact form email subject.
    var $sub = $("#_subject");
    $("#email").change( function() {
      $sub.val("Lilypad Message From " + $(this).val());
    });
    
    //Crique submission
    $('.inputfile').each( function(){
  		var $input = $( this ),
  	      $label = $input.next( 'label' ),
  		    labelVal = $label.html();

  		$input.on( 'change', function( e ){
  			var fileName = '';

  			if( this.files && this.files.length > 1 )
  				fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
  			else if( e.target.value )
  				fileName = e.target.value.split( '\\' ).pop();
        
  			if( fileName )
  				$label.find( 'span' ).html( fileName );
  			else
  				$label.html( labelVal );
  		});

  		// Firefox bug fix
  		$input
    		.on( 'focus', function(){ $input.addClass( 'has-focus' ); })
    		.on( 'blur', function(){ $input.removeClass( 'has-focus' ); });
  	});
        
    // $('.critique').each(function(i) {
    //   $(this).attr('instance',i);
    // });
    // 
    // $('.upload').on('click', function() {
    //   var instance = ".critique[instance=\"" + $(this).parents('.critique').attr('instance') + "\"]";
    //   var email = encodeURIComponent($(instance).find('input[type="email"]')[0].value);
    //   var encodedEmail = encodeURIComponent(email).replace(".", "");
    //   var file = $(instance).find('input[type="file"]')[0].files[0];
    //   
    //   var req = new XMLHttpRequest();
    //   req.open("POST", "https://lilypadmarketing.azurewebsites.net/api/critique/" + encodedEmail, true);
    //   req.setRequestHeader("Content-Type", "application/octet-stream");
    //   
    //   req.send(file);
    // });
    
  });
</script>
